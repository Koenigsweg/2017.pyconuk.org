

<!DOCTYPE html>
<html>
  <head>
    <!-- Python Powered! -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="X-Clacks-Overhead" content="GNU John Pinner">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Intermediate TDD workshop: outside-in, mocking &amp; isolation</title>

    <link rel="stylesheet" href="/static/CACHE/css/2f01ec57fa4d.css" type="text/css" />

    <script src="https://use.typekit.net/kla0hed.js"></script>
    <!--[if lt IE 9]>
    <script src="/js/modernizr.js"></script>
    <![endif]-->
  </head>

  <body class="home">
    <nav class="masthead noprint">
      <label id="toggle" for="menu-toggle"></label>
      <input type="checkbox" id="menu-toggle" name="menu-toggle" />
      <ul>
        <li><a href="http://uk.python.org/">News</a></li>
        <li><a href="/schedule/">Schedule</a></li>
        <li><a href="/sponsors/">Sponsors</a></li>
        <li><a href="/venue/">Venue</a></li>
        <li><a href="https://shop.spreadshirt.co.uk/pyconuk/">Shop</a></li>
        <li><a href="/code-of-conduct/">Code of Conduct</a></li>
        <li><a href="/ukpa/">UKPA</a></li>
        <li><a href="/contact/">Contact</a></li>
      </ul>
    </nav>
    <header class="head noprint">
      <h1><a href="/"><span>PYCON UK</span></a></h1>
    </header>
    
<article class="main-article">
  <div class="content">
    <div class="column_content">
      <h1>Intermediate TDD workshop: outside-in, mocking &amp; isolation</h1>

      <p><a href="/speakers/harry-percival/">Harry Percival</a> | Saturday 10:30 | Room A</p>

      <div class="textblock">
        
        <p>This session is aimed at an "intermediate" testing audience; labels like intermediate are always a bit dangerous, so to be more specific, I mean people who've learned a bit about testing, have tried it out a bit, and are starting to encounter some of the real-world problems of what to mock and what not to mock, and to wonder about best practices.</p>

<p>This workshop is based on a simple, practical example, where we'll go through a "pragmatic", non-mocky approach, and contrast it with a "purist", highly isolated approach, and see how it illustrates the strength and weaknesses of both approaches.  Hopefully we will conclude with a little discussion of how to get the best out of our tests, based on what it is we want from them.</p>

<h2>preparation required!</h2>

<p>this is a hands-on workshop, so come with a laptop and prepared to follow along.  if you don't then the workshop will be quite boring!</p>

<p>Here's what you need:</p>

<ul>
<li>Firefox</li>
<li><a href="https://github.com/mozilla/geckodriver/releases">Geckodriver</a></li>
<li>A checkout of <a href="https://github.com/hjwp/book-example/">the example repo</a></li>
<li>and a virtualenv with Python 3.6, django and selenium in it.</li>
</ul>

<p>more details:</p>

<p><em>1. download the example code and create your virtualenv</em></p>

<pre>
git clone https://github.com/hjwp/book-example/ tdd-workshop
cd tdd-workshop
git checkout intermediate-workshop-start
mkvirtualenv --python=python3 tdd-workshop  # or however you like to create virtualenvs
pip install -r requirements.txt
</pre>

<p><em>2. download geckodriver from <a href="https://github.com/mozilla/geckodriver/releases">here</a>, unzip it and check it works:</em></p>

<pre>
geckodriver --version
geckodriver 0.19.0
...
</pre>

<p>On windows it's usually fine to just have the binary in the same folder as your
python project (eg next to <em>manage.py</em>).  On linux + macos, you'll need to put
the geckodriver binary somewhere on your path and make sure it's executable from anywhere.</p>

<p>There are some more tips and hints in the 
<a href="http://www.obeythetestinggoat.com/book/pre-requisite-installations.html">installations chapter of my book</a>.</p>

<p><em>3. Take a look around the example site with:</em></p>

<pre>
mkdir ../database
python manage.py migrate
python manage.py runserver
</pre>

<p>it's a very simple to-do lists site...  most of the code of interest is in <em>lists/models.py</em> and <em>lists/views.py</em></p>

<p><em>4. Run the test suite and check everything works:</em></p>

<pre>
pip install selenium
python manage.py test
</pre>

<p>You should see it run 60 tests and all but one should pass. The expected error is <code>Unable to locate element: My lists</code></p>

<h2>If anything doesn't look right, you need to fix it before the workshop!</h2>

<p>There are some detailed installation instructions <a href="http://www.obeythetestinggoat.com/book/pre-requisite-installations.html">here</a></p>

<p>If firefox+geckodriver really refuses to work, you can try switching from
<code>webdriver.Firefox()</code> to <code>webdriver.Chrome()</code>.  You will need to download a
thing called "chromedriver" (google it) and have it on the path.</p>

<h1>I look forward to seeing you on Saturday!</h1>

<p>Any problems, do ping me on the conference slack, or email me at obeythetestinggoat@gmail.com</p>

        
      </div>

      

    </div>
  </div>
</article>


    <footer class="foot noprint">
      <div class="company-information">
        <ul class="social-icons">
          <li><a href="https://twitter.com/PyConUK" class="twitter"></a></li>
          <li><a href="https://www.youtube.com/channel/UChA9XP_feY1-1oSy2L7acog" class="youtube"></a></li>
        </ul>
        <div class="foot-nav pull-right">
          <ul>
            <li><a href="https://www.blanc.ltd.uk/">Design by Blanc</a></li>
          </ul>
        </div>
        <div class="legal pull-left">
          <small>&copy; 2017 PyCon UK Society Ltd. All rights reserved.</small>
        </div>
      </div>
      <address>
        <strong>PyCon UK Society Ltd.</strong>
        <small>Company Number: <a href="http://data.companieshouse.gov.uk/doc/company/10073469">10073469</a>,
          c/o Acconomy,
          Arena Business Centre,
          Holyrood Close,
          Poole,
          BH17 7FJ,
          United Kingdom</small>
      </address>
    </footer>
  </body>

  <script>
    try {
      Typekit.load({
        async: true
      });
    } catch (e) {}
  </script>
  <script
    src="https://code.jquery.com/jquery-3.1.1.slim.min.js"
    integrity="sha256-/SIrNqv8h6QGKDuNoLGA4iret+kyesCkHGzVUUV0shc="
    crossorigin="anonymous"></script>
</html>
